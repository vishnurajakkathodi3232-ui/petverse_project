{% extends "core/admin/base_admin.html" %}

{% block title %}Appointments | Super Admin{% endblock %}

{% block content %}

<h2>Appointments</h2>
<p class="text-muted">All service appointments across the platform</p>

{% if active_status %}
    <p class="text-muted">
        Showing <strong>{{ active_status|capfirst }}</strong> appointments
    </p>
{% endif %}

<hr>

<style>
    .admin-table {
        width: 100%;
        border-collapse: collapse;
        background: #0f172a;
        color: #cbd5f5;
        border-radius: 10px;
        overflow: hidden;
    }

    .admin-table thead {
        background: #111827;
    }

    .admin-table th {
        padding: 14px;
        font-size: 14px;
        font-weight: 600;
        color: #e5e7eb;
        border-bottom: 1px solid #1e293b;
        text-align: left;
    }

    .admin-table td {
        padding: 14px;
        font-size: 14px;
        border-bottom: 1px solid #1e293b;
    }

    .admin-table tbody tr {
        background: #0f172a;
        transition: background 0.2s ease;
    }

    .admin-table tbody tr:hover {
        background: #111827;
    }

    .status-pending {
        color: #eab308;
        font-weight: 600;
    }

    .status-confirmed {
        color: #16a34a;
        font-weight: 600;
    }

    .status-completed {
        color: #22c55e;
        font-weight: 600;
    }

    .status-cancelled {
        color: #dc2626;
        font-weight: 600;
    }

    .empty-row {
        text-align: center;
        padding: 20px;
        color: #94a3b8;
    }
</style>

<table class="admin-table">
    <thead>
        <tr>
            <th>ID</th>
            <th>User</th>
            <th>Pet</th>
            <th>Service</th>
            <th>Date</th>
            <th>Time</th>
            <th>Status</th>
        </tr>
    </thead>

    <tbody>
        {% for appointment in appointments %}
        <tr>
            <td>#{{ appointment.id }}</td>
            <td>{{ appointment.user.username }}</td>
            <td>{{ appointment.owned_pet.pet.name }}</td>
            <td>{{ appointment.service.name }}</td>
            <td>{{ appointment.appointment_date|date:"d M Y" }}</td>
            <td>{{ appointment.appointment_time }}</td>
            <td>
                {% if appointment.status == "pending" %}
                    <span class="status-pending">Pending</span>
                {% elif appointment.status == "confirmed" %}
                    <span class="status-confirmed">Confirmed</span>
                {% elif appointment.status == "completed" %}
                    <span class="status-completed">Completed</span>
                {% else %}
                    <span class="status-cancelled">
                        {{ appointment.get_status_display }}
                    </span>
                {% endif %}
            </td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="7" class="empty-row">
                No appointments found.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
