{% extends "core/admin/base_admin.html" %}

{% block title %}Admin | Adoptions{% endblock %}

{% block content %}

<h2>Adoption Requests</h2>
<p class="text-muted mb-4">
    Review all adoption requests across the platform
</p>

<hr>

<style>
    .admin-table {
        width: 100%;
        border-collapse: collapse;
        background: #0f172a;
        color: #cbd5f5;
        border-radius: 10px;
        overflow: hidden;
    }

    .admin-table thead {
        background: #111827;
    }

    .admin-table th {
        padding: 14px;
        font-size: 14px;
        font-weight: 600;
        color: #e5e7eb;
        border-bottom: 1px solid #1e293b;
        text-align: left;
    }

    .admin-table td {
        padding: 14px;
        font-size: 14px;
        border-bottom: 1px solid #1e293b;
    }

    .admin-table tbody tr {
        background: #0f172a;
        transition: background 0.2s ease;
    }

    .admin-table tbody tr:hover {
        background: #111827;
    }

    .type-badge {
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        background: #1e293b;
        color: #93c5fd;
        font-weight: 600;
    }

    .status-pending {
        color: #eab308;
        font-weight: 600;
    }

    .status-approved {
        color: #22c55e;
        font-weight: 600;
    }

    .status-declined {
        color: #ef4444;
        font-weight: 600;
    }

    .action-btn {
        padding: 6px 12px;
        font-size: 13px;
        border-radius: 6px;
        text-decoration: none;
        font-weight: 600;
        margin-right: 6px;
        display: inline-block;
    }

    .btn-approve {
        background: #16a34a;
        color: #ffffff;
    }

    .btn-approve:hover {
        background: #15803d;
    }

    .btn-decline {
        background: #dc2626;
        color: #ffffff;
    }

    .btn-decline:hover {
        background: #b91c1c;
    }

    .empty-row {
        text-align: center;
        padding: 20px;
        color: #94a3b8;
    }
</style>

<table class="admin-table">
    <thead>
        <tr>
            <th>#</th>
            <th>Pet</th>
            <th>Type</th>
            <th>Adopter</th>
            <th>Status</th>
            <th>Actions</th>
        </tr>
    </thead>

    <tbody>
        {% for adoption in adoptions %}
        <tr>
            <td>{{ forloop.counter }}</td>

            <td>{{ adoption.target_pet_name }}</td>

            <td>
                <span class="type-badge">
                    {{ adoption.adoption_type }}
                </span>
            </td>

            <td>{{ adoption.adopter.username }}</td>

            <td>
                {% if adoption.status == "pending" %}
                    <span class="status-pending">Pending</span>
                {% elif adoption.status == "approved" %}
                    <span class="status-approved">Approved</span>
                {% else %}
                    <span class="status-declined">Declined</span>
                {% endif %}
            </td>

            <td>
                {% if adoption.status == "pending" %}
                    <a href="{% url 'admin_approve_adoption' adoption.id %}"
                       class="action-btn btn-approve">
                        Approve
                    </a>

                    <a href="{% url 'admin_reject_adoption' adoption.id %}"
                       class="action-btn btn-decline">
                        Decline
                    </a>
                {% else %}
                    <span class="text-muted">â€”</span>
                {% endif %}
            </td>
        </tr>

        {% empty %}
        <tr>
            <td colspan="6" class="empty-row">
                No adoption requests found.
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}
