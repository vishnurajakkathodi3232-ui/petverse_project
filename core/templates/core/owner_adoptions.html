{% extends "core/base_inner.html" %}

{% block title %}Adoption Requests | PetVerse{% endblock %}

{% block content %}
<h2>Adoption Requests ðŸ“©</h2>
<p class="text-muted">Review adoption requests and communicate with adopters.</p>

<hr>

{% if requests %}
<div class="row">

    {% for req in requests %}
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-body">

                <h4>
                    <i class="fa fa-paw"></i>
                    {{ req.owned_pet.pet.name }}
                </h4>

                <p>
                    <strong>Adopter:</strong> {{ req.adopter.username }} <br>
                    <strong>Message:</strong>
                    {{ req.message|default:"No message provided." }}
                </p>

                <p>
                    <strong>Status:</strong>
                    {% if req.status == "pending" %}
                        <span class="label label-warning">Pending</span>
                    {% elif req.status == "approved" %}
                        <span class="label label-success">Approved</span>
                    {% else %}
                        <span class="label label-danger">Rejected</span>
                    {% endif %}
                </p>

                <hr>

                <!-- CHAT BUTTON (AVAILABLE ALWAYS) -->
                <a href="{% url 'chat_room' req.id %}"
                   class="btn btn-info btn-sm">
                    <i class="fa fa-comments"></i> Open Chat
                </a>

                {% if req.status == "pending" %}
                    <a href="{% url 'owner_approve_request' req.id %}"
                       class="btn btn-success btn-sm">
                        <i class="fa fa-check"></i> Approve
                    </a>

                    <a href="{% url 'owner_reject_request' req.id %}"
                       class="btn btn-danger btn-sm">
                        <i class="fa fa-times"></i> Reject
                    </a>
                {% endif %}

            </div>
        </div>
    </div>
    {% endfor %}

</div>
{% else %}
<div class="alert alert-info">
    No adoption requests yet.
</div>
{% endif %}

{% endblock %}
