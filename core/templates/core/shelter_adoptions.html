{% extends "core/base_inner.html" %}

{% block title %}Shelter Adoption Requests | PetVerse{% endblock %}

{% block content %}
<h2>Adoption Requests ðŸ“¥</h2>
<p class="text-muted">
    Review adoption requests and communicate with adopters.
</p>

<hr>

{% if requests %}
<div class="row">

    {% for r in requests %}
    <div class="col-md-6">
        <div class="panel panel-default">
            <div class="panel-body">

                <h4>
                    <i class="fa fa-paw"></i>
                    {{ r.pet.name }}
                </h4>

                <p>
                    <strong>Adopter:</strong> {{ r.adopter.username }} <br>
                    <strong>Message:</strong>
                    {{ r.message|default:"No message provided." }}
                </p>

                <p>
                    <strong>Status:</strong>
                    {% if r.status == "pending" %}
                        <span class="label label-warning">Pending</span>
                    {% elif r.status == "approved" %}
                        <span class="label label-success">Approved</span>
                    {% else %}
                        <span class="label label-danger">Declined</span>
                    {% endif %}
                </p>

                <hr>

                <!-- CHAT BUTTON -->
                <a href="{% url 'chat_room' r.id %}"
                   class="btn btn-info btn-sm">
                    <i class="fa fa-comments"></i> Open Chat
                </a>

                {% if r.status == "pending" %}
                    <a href="{% url 'approve_request' r.id %}"
                       class="btn btn-success btn-sm">
                        <i class="fa fa-check"></i> Approve
                    </a>

                    <a href="{% url 'decline_request' r.id %}"
                       class="btn btn-danger btn-sm">
                        <i class="fa fa-times"></i> Decline
                    </a>
                {% endif %}

            </div>
        </div>
    </div>
    {% endfor %}

</div>
{% else %}
<div class="alert alert-info">
    No adoption requests yet.
</div>
{% endif %}

{% endblock %}
